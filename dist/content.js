window.hasApplylyListener||(window.hasApplylyListener=!0,chrome.runtime.onMessage.addListener((o,n,i)=>{if(o.type==="FILL_FORM"){const t=c(o.data);i({count:t})}return!0}));function c(o){let n=0;return b().forEach(t=>{if(!f(t))return;t.scrollIntoView({behavior:"smooth",block:"center"});const s=p(t);if(t instanceof HTMLInputElement&&t.type==="checkbox"){const r=s.toLowerCase();if(r.includes("present")||r.includes("currently")||r.includes("i currently work here")){t.checked=!0;return}}const e=y(s,o);e&&(t instanceof HTMLSelectElement?u(t,e):(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&(t.value=e),t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),t.dispatchEvent(new Event("blur",{bubbles:!0})),m(t),n++)}),n>0&&h(n),n}function f(o){const n=window.getComputedStyle(o);return n.display!=="none"&&n.visibility!=="hidden"&&n.opacity!=="0"&&o.offsetWidth>0&&o.offsetHeight>0}function p(o){const n=[];if(o.id){const e=document.querySelector(`label[for="${o.id}"]`);e&&n.push(e.textContent||"")}const i=o.closest("label");i&&n.push(i.textContent||""),[o.getAttribute("aria-label"),o.getAttribute("aria-labelledby"),o.getAttribute("placeholder"),o.getAttribute("name"),o.id].forEach(e=>{e&&n.push(e)});const s=o.parentElement;if(s){const e=s.textContent||"";e.length<100&&n.push(e)}return n.join(" ").toLowerCase()}function y(o,n){const i=o.toLowerCase(),t=n.personalInfo,s=[[["first name","given name","fname"],t.firstName],[["last name","family name","surname","lname"],t.lastName],[["email","e-mail"],t.email],[["phone","mobile","cell","tel"],t.phone],[["linkedin"],t.linkedin],[["website","portfolio","portfolio site","site"],t.website],[["github"],t.github],[["address","street","location"],t.address],[["city"],t.address.split(",")[0]||""]];for(const[e,r]of s)if(e.some(a=>i.includes(a)))return r;if(n.workExperience.length>0)for(const e of n.workExperience){const r=[[["employer","company","organization"],e.company],[["job title","position","role"],e.title],[["responsibilities","work description","description","role description"],e.description],[["location"],e.location],[["start month"],e.dates.startMonth],[["start year"],e.dates.startYear],[["end month"],e.present?"":e.dates.endMonth],[["end year"],e.present?"Present":e.dates.endYear]];for(const[a,l]of r)if(a.some(d=>i.includes(d)))return l}if(n.education.length>0)for(const e of n.education){const r=[[["school","university","college","institution"],e.school],[["degree","qualification"],e.degree],[["field of study","major","program"],e.field],[["gpa","grade","average"],e.gpa||""],[["description","role description"],e.description||""],[["location"],e.location],[["start month"],e.dates.startMonth],[["start year"],e.dates.startYear],[["end month"],e.present?"":e.dates.endMonth],[["end year"],e.present?"Present":e.dates.endYear]];for(const[a,l]of r)if(a.some(d=>i.includes(d)))return l}if(n.leadershipExperience.length>0)for(const e of n.leadershipExperience){const r=[[["organization","community","volunteer"],e.organization],[["role","title","position"],e.role],[["description","responsibilities"],e.description],[["location"],e.location],[["start month"],e.dates.startMonth],[["start year"],e.dates.startYear],[["end month"],e.present?"":e.dates.endMonth],[["end year"],e.present?"Present":e.dates.endYear]];for(const[a,l]of r)if(a.some(d=>i.includes(d)))return l}return i.includes("skill")||i.includes("competencies")?n.skills.join(", "):null}function u(o,n){const i=n.toLowerCase(),t=Array.from(o.options);let s=t.find(e=>e.text.toLowerCase()===i||e.value.toLowerCase()===i);s||(s=t.find(e=>e.text.toLowerCase().includes(i)||i.includes(e.text.toLowerCase()))),s&&(o.value=s.value)}function m(o){const n=o.style.border,i=o.style.boxShadow;o.style.border="2px solid #FF8C42",o.style.boxShadow="0 0 8px rgba(255, 140, 66, 0.4)",setTimeout(()=>{o.style.border=n,o.style.boxShadow=i},2e3)}function h(o){var s;const n=document.getElementById("applyly-overlay");n&&n.remove();const i=document.createElement("div");i.id="applyly-overlay",i.style.cssText=`
        position: fixed;
        bottom: 24px;
        right: 24px;
        background: #1a1d21;
        color: white;
        padding: 12px 20px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        z-index: 1000000;
        display: flex;
        align-items: center;
        gap: 12px;
        font-family: -apple-system, system-ui, sans-serif;
        border: 1px solid rgba(255, 140, 66, 0.3);
        animation: applyly-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    `;const t=document.createElement("style");t.textContent=`
        @keyframes applyly-slide-in {
            from { transform: translateX(100%) opacity: 0; }
            to { transform: translateX(0) opacity: 1; }
        }
    `,document.head.appendChild(t),i.innerHTML=`
        <div style="width: 24px; height: 24px; background: #FF8C42; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        </div>
        <div>
            <div style="font-weight: 600; font-size: 14px;">Applylyâ„¢</div>
            <div style="font-size: 12px; opacity: 0.8;">Filled ${o} fields correctly</div>
        </div>
        <button id="applyly-close" style="background: none; border: none; color: white; opacity: 0.5; padding: 4px; cursor: pointer; font-size: 20px; margin-left: 8px;">&times;</button>
    `,document.body.appendChild(i),(s=document.getElementById("applyly-close"))==null||s.addEventListener("click",()=>i.remove()),setTimeout(()=>{i.style.transform="translateX(120%)",i.style.opacity="0",i.style.transition="all 0.5s ease",setTimeout(()=>i.remove(),500)},4e3)}function b(){const o=[],n=i=>{let t;if(i instanceof HTMLIFrameElement)try{t=i.contentDocument||void 0}catch{}else t=i;if(!t)return;const s=Array.from(t.querySelectorAll("input, textarea, select"));o.push(...s),t.querySelectorAll("*").forEach(r=>{r.shadowRoot&&n(r.shadowRoot),r.tagName==="IFRAME"&&n(r)})};return n(document),o}
